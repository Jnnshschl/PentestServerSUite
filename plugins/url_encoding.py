import urllib.parse

from pssutil.cmdutils import CmdLenValidator


def add_cmd(pm, cmd):
    url_handler = cmd.add(["url"])
    url_handler.add(["e", "encode"], CmdLenValidator(lambda args: print(urllib.parse.quote(" ".join(args))), 1, ["input"]))
    url_handler.add(
        ["a", "encodeall"], CmdLenValidator(lambda args: print("".join("%{0:0>2x}".format(ord(c)) for c in " ".join(args))), 1, ["input"])
    )
    url_handler.add(["d", "decode"], CmdLenValidator(lambda args: print(urllib.parse.unquote("".join(args))), 1, ["input"]))
