import string

from pssutil.cmdutils import CmdLenValidator


def rot_n(n):
    lc = string.ascii_lowercase
    uc = string.ascii_uppercase
    return lambda args: print(str.translate(" ".join(args), str.maketrans(lc + uc, lc[n:] + lc[:n] + uc[n:] + uc[:n])))


def add_cmd(pm, cmd):
    cipher_handler = cmd.add(["cipher"])
    cipher_handler.add(["rot5"], CmdLenValidator(rot_n(5), 1, ["input"]))
    cipher_handler.add(["rot13"], CmdLenValidator(rot_n(13), 1, ["input"]))
    cipher_handler.add(["rot18"], CmdLenValidator(rot_n(18), 1, ["input"]))
    cipher_handler.add(["rot47"], CmdLenValidator(rot_n(47), 1, ["input"]))

    decipher_handler = cmd.add(["decipher"])
    decipher_handler.add(["rot5"], CmdLenValidator(rot_n(-5), 1, ["input"]))
    decipher_handler.add(["rot13"], CmdLenValidator(rot_n(-13), 1, ["input"]))
    decipher_handler.add(["rot18"], CmdLenValidator(rot_n(-18), 1, ["input"]))
    decipher_handler.add(["rot47"], CmdLenValidator(rot_n(-47), 1, ["input"]))
