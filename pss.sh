#!/bin/bash
cd $(cd "$(dirname "$BASH_SOURCE")"; cd -P "$(dirname "$(readlink "$BASH_SOURCE" || echo .)")"; pwd)

if command -v python3.12 &>/dev/null; then
    python_version="python3.12"
else
    python_version="python3"
fi

if [ ! -d ".pss-venv" ]; then
    $python_version -m venv .pss-venv
fi

source .pss-venv/bin/activate

if [ -f "requirements.txt" ]; then
    $python_version -m pip install -r requirements.txt -U -q
fi

$python_version pss.py $@
deactivate
